# Comparing Functional and Imperative performance

During a recent talk on programming paradigms [Pavel Tcholakov](https://twitter.com/pavletko) presented an example using
Java 8 streams to solve the classic FizzBuzz problem.

> Write a program that prints the numbers from 1 to 100.
  But for multiples of three print “Fizz” instead of the number and for the multiples of five print “Buzz”.
  For numbers which are multiples of both three and five print “FizzBuzz”.

Here is a little project to compare the performance of imperative and functional programming.

The [jmh gradle plugin](https://github.com/melix/jmh-gradle-plugin) was a great discovery.

The numbers on Intel Core^TM^ i7 2.9Ghz

## Changelog
* Added [Scala](http://www.scala-lang.org) versions.
* Added [Groovy](http://www.groovy-lang.org) versions.
* Created Java functional that doesn't perform map/reduce.
* Refactored Scala version to similar functional without map/reduce.
* Added [Kotlin](https://kotlinlang.org) versions
* Added Scala Streams after [Guillaume Belrose](https://twitter.com/gbelrose) linked to [https://gist.github.com/samklr/6098769](https://gist.github.com/samklr/6098769)
* Refactored Java and Scala Predicates to inline lambdas instead of static methods. No significant difference in performance.
* Added Scalaz version after [Andreas Pauley](https://twitter.com/apauley) linked to [https://gist.github.com/apauley/ca8197f5b9b822097c50](https://gist.github.com/apauley/ca8197f5b9b822097c50) Providing some of the best performance of all the functional versions
* Kotlin 1.1.3 moves up in the functional performance.
* Kotlin 1.2.10 improves functional performance.
* Added Java - Vavr using vavr 0.9.2.
* Updated Kotlin to 1.2.41.
* Updated Kotlin to 1.3.21

## Results

Units = ops/s
JVM = GraalVM 19.0.2  ** Zulu 11.0.3 -- Faster for inline functions and some imperative calls

```
Benchmark                                        Mode  Cnt      Score
FixBuzzBenchmark.testGroovyFunctional           thrpt    5     16474.8
FixBuzzBenchmark.testGroovyImperativeCall       thrpt    5   1573780.8
FixBuzzBenchmark.testGroovyImperativeInline     thrpt    5   5461063.6  ** 326833664.8

FixBuzzBenchmark.testJavaFunctional             thrpt    5    132041.3
FixBuzzBenchmark.testJavaFunctionalMapReduce    thrpt    5    109356.1
FixBuzzBenchmark.testJavaFunctionalVavr         thrpt    5    276654.9
FixBuzzBenchmark.testJavaImperativeCall         thrpt    5   1549195.4
FixBuzzBenchmark.testJavaImperativeInline       thrpt    5   5247794.3 ** 1224985341.6

FixBuzzBenchmark.testKotlinFunctionalMapReduce  thrpt    5    406664.1
FixBuzzBenchmark.testKotlinFunctional           thrpt    5    623363.6
FixBuzzBenchmark.testKotlinImperativeCall       thrpt    5   1754154.1
FixBuzzBenchmark.testKotlinImperativeInline     thrpt    5   5792990.7 ** 1220873544.8

FixBuzzBenchmark.testScalaFunctionalStreams     thrpt    5     49250.0
FixBuzzBenchmark.testScalaFunctional            thrpt    5    559828.4
FixBuzzBenchmark.testScalaZFunctional           thrpt    5    653267.0
FixBuzzBenchmark.testScalaImperativeCall        thrpt    5    950559.6 ** 1381204.3
FixBuzzBenchmark.testScalaImperativeInline      thrpt    5   1555235.3 ** 1773103.6
```

### Imperative

```
Benchmark                                        Mode  Cnt       Score
FixBuzzBenchmark.testScalaImperativeCall        thrpt    5    950559.6 **    1381204.3
FixBuzzBenchmark.testJavaImperativeCall         thrpt    5   1549195.4
FixBuzzBenchmark.testScalaImperativeInline      thrpt    5   1555235.3 **    1773103.6
FixBuzzBenchmark.testGroovyImperativeCall       thrpt    5   1573780.8 **    1751589.0
FixBuzzBenchmark.testKotlinImperativeCall       thrpt    5   1754154.1
FixBuzzBenchmark.testJavaImperativeInline       thrpt    5   5247794.3 ** 1224985341.6
FixBuzzBenchmark.testGroovyImperativeInline     thrpt    5   5461063.6 **  326833664.8
FixBuzzBenchmark.testKotlinImperativeInline     thrpt    5   5792990.7 ** 1220873544.8

```

### Functional

```
Benchmark                                        Mode  Cnt       Score
FixBuzzBenchmark.testGroovyFunctional           thrpt    5     16474.8
FixBuzzBenchmark.testScalaFunctionalStreams     thrpt    5     49250.0
FixBuzzBenchmark.testJavaFunctionalMapReduce    thrpt    5    109356.1
FixBuzzBenchmark.testJavaFunctional             thrpt    5    132041.3
FixBuzzBenchmark.testJavaFunctionalVavr         thrpt    5    276654.9
FixBuzzBenchmark.testKotlinFunctionalMapReduce  thrpt    5    406664.1
FixBuzzBenchmark.testScalaFunctional            thrpt    5    559828.4
FixBuzzBenchmark.testKotlinFunctional           thrpt    5    623363.6
FixBuzzBenchmark.testScalaZFunctional           thrpt    5    653267.0

```

++++
<br/><br/>
<a href='https://ko-fi.com/D1D37NFO' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://az743702.vo.msecnd.net/cdn/kofi2.png?v=0' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
++++

