# Comparing Functional and Imperative performance

During a recent talk on programming paradigms [Pavel Tcholakov](https://twitter.com/pavletko) presented an example using
Java 8 streams to solve the classic FizzBuzz problem.

> Write a program that prints the numbers from 1 to 100.
  But for multiples of three print “Fizz” instead of the number and for the multiples of five print “Buzz”.
  For numbers which are multiples of both three and five print “FizzBuzz”.

Here is a little project to compare the performance of imperative and functional programming.

The [jmh gradle plugin](https://github.com/melix/jmh-gradle-plugin) was a great discovery.


The numbers on Intel Core<sup>TM</sup> i7 2.5Ghz

## Changelog
* Added [Scala](http://www.scala-lang.org) versions.
* Added [Groovy](http://www.groovy-lang.org) versions.
* Created Java functional that doesn't perform map/reduce.
* Refactored Scala version to similar functional without map/reduce.
* Added [Kotlin](https://kotlinlang.org) versions
* Added Scala Streams after [Guillaume Belrose](https://twitter.com/gbelrose) linked to [https://gist.github.com/samklr/6098769](https://gist.github.com/samklr/6098769)
* Refactored Java and Scala Predicates to inline lambdas instead of static methods. No significant difference in performance.
* Added Scalaz version after [Andreas Pauley](https://twitter.com/apauley) linked to [https://gist.github.com/apauley/ca8197f5b9b822097c50](https://gist.github.com/apauley/ca8197f5b9b822097c50) Providing some of the best performance of all the functional versions
* Kotlin 1.1.3 moves up in the functional performance.
* Kotlin 1.2.10 improves functional performance.
* Added Java - Vavr using vavr 0.9.2.
* Updated Kotlin to 1.2.41.

## Results

```
Benchmark                                        Mode  Cnt        Score         Error  Units
FixBuzzBenchmark.testGroovyFunctional           thrpt    5    11221.808 ±    4008.804  ops/s
FixBuzzBenchmark.testGroovyImperativeCall       thrpt    5   655433.913 ±  168306.929  ops/s
FixBuzzBenchmark.testGroovyImperativeInline     thrpt    5  1979069.121 ±  677704.565  ops/s

FixBuzzBenchmark.testJavaFunctional             thrpt    5   112316.685 ±   15388.262  ops/s
FixBuzzBenchmark.testJavaFunctionalMapReduce    thrpt    5    89820.347 ±   36001.408  ops/s
FixBuzzBenchmark.testJavaFunctionalVavr         thrpt    5   181992.684 ±    5319.046  ops/s
FixBuzzBenchmark.testJavaImperativeCall         thrpt    5   791174.387 ±  178065.276  ops/s
FixBuzzBenchmark.testJavaImperativeInline       thrpt    5  2630778.181 ±  520830.994  ops/s

FixBuzzBenchmark.testKotlinFunctionalMapReduce  thrpt    5   171711.141 ±   62925.735  ops/s
FixBuzzBenchmark.testKotlinFunctional           thrpt    5   209749.830 ±   85171.772  ops/s
FixBuzzBenchmark.testKotlinImperativeCall       thrpt    5   791791.979 ±   71202.302  ops/s
FixBuzzBenchmark.testKotlinImperativeInline     thrpt    5  2609107.175 ± 1206435.392  ops/s

FixBuzzBenchmark.testScalaFunctionalStreams     thrpt    5    45459.175 ±    9841.524  ops/s
FixBuzzBenchmark.testScalaFunctional            thrpt    5   299938.096 ±   14362.987  ops/s
FixBuzzBenchmark.testScalaZFunctional           thrpt    5   353630.137 ±  125385.402  ops/s
FixBuzzBenchmark.testScalaImperativeCall        thrpt    5   691682.453 ±  193006.822  ops/s
FixBuzzBenchmark.testScalaImperativeInline      thrpt    5   587895.917 ±  104655.772  ops/s
```

### Imperative
```
Benchmark                                        Mode  Cnt        Score         Error  Units
FixBuzzBenchmark.testJavaImperativeInline       thrpt    5  2630778.181 ±  520830.994  ops/s
FixBuzzBenchmark.testKotlinImperativeInline     thrpt    5  2609107.175 ± 1206435.392  ops/s
FixBuzzBenchmark.testGroovyImperativeInline     thrpt    5  1979069.121 ±  677704.565  ops/s
FixBuzzBenchmark.testKotlinImperativeCall       thrpt    5   791791.979 ±   71202.302  ops/s
FixBuzzBenchmark.testJavaImperativeCall         thrpt    5   791174.387 ±  178065.276  ops/s
FixBuzzBenchmark.testScalaImperativeCall        thrpt    5   691682.453 ±  193006.822  ops/s
FixBuzzBenchmark.testGroovyImperativeCall       thrpt    5   655433.913 ±  168306.929  ops/s
FixBuzzBenchmark.testScalaImperativeInline      thrpt    5   587895.917 ±  104655.772  ops/s
```

### Functional
```
Benchmark                                        Mode  Cnt        Score         Error  Units
FixBuzzBenchmark.testScalaZFunctional           thrpt    5   353630.137 ±  125385.402  ops/s
FixBuzzBenchmark.testScalaFunctional            thrpt    5   299938.096 ±   14362.987  ops/s
FixBuzzBenchmark.testKotlinFunctional           thrpt    5   209749.830 ±   85171.772  ops/s
FixBuzzBenchmark.testJavaFunctionalVavr         thrpt    5   181992.684 ±    5319.046  ops/s
FixBuzzBenchmark.testKotlinFunctionalMapReduce  thrpt    5   171711.141 ±   62925.735  ops/s
FixBuzzBenchmark.testJavaFunctional             thrpt    5   112316.685 ±   15388.262  ops/s
FixBuzzBenchmark.testJavaFunctionalMapReduce    thrpt    5    89820.347 ±   36001.408  ops/s
FixBuzzBenchmark.testScalaFunctionalStreams     thrpt    5    45459.175 ±    9841.524  ops/s
FixBuzzBenchmark.testGroovyFunctional           thrpt    5    11221.808 ±    4008.804  ops/s
```


++++
<br/><br/>
<a href='https://ko-fi.com/D1D37NFO' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://az743702.vo.msecnd.net/cdn/kofi2.png?v=0' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
++++

